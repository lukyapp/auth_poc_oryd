# |----------------------------------------------------------
# | 0. Project
# |----------------------------------------------------------

MY_APP_HOST_NAME=localhost.com

# |----------------------------------------------------------
# | 0.1 Databases
# |----------------------------------------------------------

# |----------------------------------------------------------
# | 0.1.1 Database - Kratos
# |----------------------------------------------------------

KRATOS_POSTGRES_USER=ory
KRATOS_POSTGRES_PASS=ory
KRATOS_POSTGRES_DATABASE=kratos

# |----------------------------------------------------------
# | 0.1.2 Database - Hydra
# |----------------------------------------------------------

HYDRA_POSTGRES_USER=ory
HYDRA_POSTGRES_PASS=ory
HYDRA_POSTGRES_DATABASE=hydra

# |----------------------------------------------------------
# | 0.1 Postgres reverse proxy
# |----------------------------------------------------------

REVERSE_PROXY_DATABASE_URLS=postgres://${KRATOS_POSTGRES_USER}:${KRATOS_POSTGRES_PASS}@kratos-postgres:5432/${KRATOS_POSTGRES_DATABASE},postgres://${HYDRA_POSTGRES_USER}:${HYDRA_POSTGRES_PASS}@hydra-postgres:5432/${HYDRA_POSTGRES_DATABASE}

# |----------------------------------------------------------
# | 1. Kratos
# |----------------------------------------------------------

KRATOS_DSN=postgres://${KRATOS_POSTGRES_USER}:${KRATOS_POSTGRES_PASS}@kratos-postgres:5432/${KRATOS_POSTGRES_DATABASE}?sslmode=disable&max_conns=20&max_conn_lifetime=5m

# |----------------------------------------------------------
# | 1.2. Kratos - oauth
# |----------------------------------------------------------

KRATOS_OAUTH_GOOGLE_CLIENT_ID=TODO
KRATOS_OAUTH_GOOGLE_CLIENT_SECRET=TODO

# |----------------------------------------------------------
# | 2. Hydra
# |----------------------------------------------------------

HYDRA_DSN=postgres://${HYDRA_POSTGRES_USER}:${HYDRA_POSTGRES_PASS}@hydra-postgres:5432/${HYDRA_POSTGRES_DATABASE}?sslmode=disable&max_conns=20&max_conn_lifetime=5m

# |----------------------------------------------------------
# | 2.1. Hydra - config
# |----------------------------------------------------------

# --------- Hydra common ---------
HYDRA_BASE_URL=http://localhost:4444
# --------- Hydra secrets (32+ bytes hex recommended) ---------
# Generate with:  openssl rand -hex 32
HYDRA_SECRETS_SYSTEM=8b5e6f3c1f0b4a6c9d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5061728394a5b6c7d
# --------- Hydra jwt sign options ---------
HYDRA_JWT_ISSUER=${HYDRA_BASE_URL}
HYDRA_TTL_ACCESS_TOKEN=1h
HYDRA_TTL_REFRESH_TOKEN=720h

# |----------------------------------------------------------
# | 3. Kratos UI
# |----------------------------------------------------------

# --------- Ory Identities (Kratos) requires the following variables to be set ---------
KRATOS_INTERNAL_PUBLIC_URL=http://kratos:4433/
KRATOS_EXTERNAL_PUBLIC_URL=http://localhost:4433/
KRATOS_INTERNAL_ADMIN_URL=http://kratos:4434/
# --------- Ory OAuth2 (Hydra) requires more setup to get CSRF cookies on the /consent endpoint. ---------
HYDRA_INTERNAL_ADMIN_URL=http://hydra:4445/
CSRF_COOKIE_NAME=__Host-${MY_APP_HOST_NAME}-x-csrf-token
CSRF_COOKIE_SECRET=please_replace_with_random_32_bytes
COOKIE_SECRET=please_replace_with_random_32_bytes

# |----------------------------------------------------------
# | 4. Authorize ui app config
# |----------------------------------------------------------

# --------- for hydra authorize endpoint : /oauth2/auth ---------
#OAUTH_UI_APP_BASE_URL=http://localhost:3000
OAUTH_UI_APP_BASE_URL=http://localhost:5173
OAUTH_UI_APP_AUTH_URL=${OAUTH_UI_APP_BASE_URL}/auth

OAUTH_UI_APP_LOGIN_URL=${OAUTH_UI_APP_AUTH_URL}/login
OAUTH_UI_APP_REGISTRATION_URL=${OAUTH_UI_APP_AUTH_URL}/registration
OAUTH_UI_APP_CONSENT_URL=${OAUTH_UI_APP_AUTH_URL}/consent
OAUTH_UI_APP_LOGOUT_URL=${OAUTH_UI_APP_AUTH_URL}/logout
OAUTH_UI_APP_DEVISE_VERIFICATION_URL=${OAUTH_UI_APP_AUTH_URL}/device_verification
OAUTH_UI_APP_DEVISE_SUCCESS_URL=${OAUTH_UI_APP_AUTH_URL}/device_done
OAUTH_UI_APP_ERROR_URL=${OAUTH_UI_APP_AUTH_URL}/error
OAUTH_UI_APP_LOGOUT_SUCCESSFUL_URL=${OAUTH_UI_APP_AUTH_URL}/logout-successful
OAUTH_UI_APP_SETTINGS_URL=${OAUTH_UI_APP_BASE_URL}/settings
OAUTH_UI_APP_RECOVERY_URL=${OAUTH_UI_APP_AUTH_URL}/recovery
